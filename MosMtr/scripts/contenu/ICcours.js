var actionD;var itemListeCourant;var imageAnimCourant;var delaiAnimEnCours=false;function CRS_init(){entrerDonnees();desactiverBoutonInit(); actionD=false;GEN_activerSuivantDemar();if (dureePage!=''){dureePage=Number(dureePage);if (!isNaN(dureePage) && dureePage>0){oTempsLimite=PF_donneObjet('STY_tempsLimiteC');tempsLimiteCourant=dureePage;setTimeout(CRS_finTemps,dureePage*1000);if (oTempsLimite!=null){oTempsLimite.innerHTML=dureePage;setTimeout(GEN_decrementeTempsL,1000);}}}var oZnC=PF_donneObjet("STY_texteCours");if (oZnC!=null){if (oZnC.innerHTML==''){PF_masquerDiv("STY_zoneCours");} else {if (leCours.animListes){itemListeCourant=null;var lesitems=oZnC.getElementsByTagName("li");for (var i=0;i<lesitems.length;i++){lesitems[i].className="STY_itemListeAvant";}}if (leCours.animImages){var lesitems=oZnC.getElementsByTagName("img");if (lesitems.length>1){var oPere=lesitems[0].parentNode;if (oPere.nodeName=="TD"){for (var i=oPere.childNodes.length-1;i>=0;i--){if (oPere.childNodes[i].nodeName!="IMG"){oPere.removeChild(oPere.childNodes[i]);}}if ((typeof(oZnC.style.MozTransition)=="string" || typeof(oZnC.style.webkitTransition)=="string")){oPere.style.display="block";oPere.style.position="relative";}}for (var i=1;i<lesitems.length;i++){masquerImageAnim(lesitems[i]);}imageAnimCourant=lesitems[0];}}if (premierInitZoneContenu=="non"){GEN_lireMediaZone("STY_texteCours",true,"non");}GEN_lireMediaZone("STY_texteCours",false,premierInitZoneContenu);premierInitZoneContenu="non";}}for (var i=0;i<leCours.commentaires.length;i++){if (leCours.commentaires[i].delai=="0"){leCours.commentaires[i].afficher();}}if (leCours.delaiAnim!="" && animationActive()){delaiAnimEnCours=true;leCours.delaiAnim=Number(leCours.delaiAnim)*1000;var premierDelai=leCours.delaiAnim;if (delaiZoneCtn!=""){premierDelai+=Number(delaiZoneCtn)*1000;}setTimeout(evtDelaiAnim,premierDelai);}window.focus();}function evtDelaiAnim(){if (appliqueEffet(true)){setTimeout(evtDelaiAnim,leCours.delaiAnim);} else {delaiAnimEnCours=false;}}function CRS_finTemps(){if (!MODE_EDIT){if (desactiveSuivantPg){parent.SCO_suivantPossible();}etatSuivant=true;STG_allerSuivant();}}function actionDetecte(){if (actionD==false){actionD=true;activerBoutonInit();}}function CRS_afficherDetail(num){window.status='';if (num!=''){CRS_afficheCommentaire(num);}}function CRS_effacerDetail(num){var oCmt=donneCmtID("divCmt"+num);if (oCmt.duree==""){if (oCmt.estBulle){GEN_masqueBulle(false);} else {GEN_masqueCommentaireClassique();}}}function CRS_afficheCommentaire(num){var oCmt=donneCmtID("divCmt"+num);if (oCmt==null){alert("Error: comment "+num+" not found.");return ;}if (!oCmt.estAffiche){oCmt.afficher();}}function STG_initialiser(evt){chopeEtStpEvt(evt);if (!MODE_EDIT){GEN_masqueCommentaireClassique();GEN_masqueBulle(true);indexLienOuvert=-1;CRS_masquerAnims();GEN_masquerParaBasc();CRS_init();}}function SPE_delaiCmt(idCmt){var oCmt=donneCmtID(idCmt);if (!oCmt.estAffiche){oCmt.afficher();}}function SPE_dureeCmt(idCmt){var oCmt=donneCmtID(idCmt);if (oCmt.estAffiche){if (oCmt.estBulle){oCmt.masquerBulle();} else {if (oCmt.fonduS!=""){oCmt.fonduFin();} else {GEN_masqueCommentaireClassique();}}}}function STG_allerSuivant(){if (etatSuivant){etatSuivant=false;attrapeEvtClic=true;if (parent.oSco.evaluation!=null){parent.oSco.evaluation.allerSuivant();} else {parent.SCO_pageSuivante();}}}function GEN_masqueBulle(force){if (laisseBulleAffiche){return ;}for (var i=0;i<leCours.commentaires.length;i++){var oCmt=leCours.commentaires[i];if (oCmt.estBulle){if (oCmt.estAffiche &&(force||oCmt.duree=='')){oCmt.masquerBulle();}}}}function GEN_masqueCommentaireClassique(){PF_modifTexteDiv('STY_titreCommentaire','');var oStyCmt=PF_donneObjet("STY_contenuCommentaire");for (var i=0;i<leCours.commentaires.length;i++){var oCmt=leCours.commentaires[i];if (!oCmt.estBulle){if (oCmt.estAffiche){var oDiv=PF_donneObjet(oCmt.id);if ((oDiv!=null)&&(oStyCmt!=null)){oDiv.innerHTML=oStyCmt.innerHTML;}oCmt.estAffiche=false;}}}GEN_changerContenuDetail("");}function SPE_clicDansBulle(evt,idCmt){var oEv;if (parent.oSco.config_navigateur=="Netscape"){oEv=evt;} else {oEv=window.event;}var oCmt=donneCmtID("divCmt"+idCmt);if ((oCmt!=null)&&(oEv!=null)&&(oCmt.estBulle)){oEv.cancelBubble=true;if (parent.oSco.config_navigateur=="Netscape"){oEv.stopPropagation();}}}function Cours() { this.commentaires; this.partieDetail; this.animListes=false; this.animImages=false; this.delaiAnim; this.init=cours_init;this.ajouterCommentaire=cours_ajouterCommentaire;}function cours_init(partieDetail){ this.commentaires= new Array(); this.partieDetail=partieDetail;}function cours_ajouterCommentaire(idDiv,titre,posX,posY,posL,posH,duree,delai,styBulle,orign,fonduE,fonduS,initX,initY,vitesse,defil,vdefil){var oCmt=new Commentaire(idDiv,titre,posX,posY,posL,posH,duree,delai,orign,fonduE,fonduS,initX,initY,vitesse,defil,vdefil);oCmt.init(styBulle);this.commentaires.push(oCmt);}function doubleClicPgCours(ccar){if (ccar==33){STG_allerPrecedent();}if (ccar==34){if (!desactiveSuivantPg){STG_allerSuivant();}}}function actionTouchePgSuivante(glissade){if (glissade){if (!desactiveSuivantPg && GEN_suivantPossible()){return STG_allerSuivant();}return;}if (!derouleLiensPgSuiv(true)){GEN_clavier();}}function actionTouchePgPrecedente(glissade){if (glissade){if (GEN_precedentPossible()){return STG_allerPrecedent();}return;}if (!derouleLiensPgSuiv(false)){if (animationActive()&&appliqueEffet(false)){return ;}STG_allerPrecedent();}}function derouleLiensPgSuiv(enAvant){var numTemp=0;var cmtAffiche=false;for (var i=0;i<leCours.commentaires.length;i++){var oCmt=leCours.commentaires[i];if (oCmt.estBulle && oCmt.estAffiche && oCmt.duree==""){oCmt.masquerBulle();cmtAffiche=true;}}if (cmtAffiche){return true;}if (indexLienOuvert<0 && !enAvant){return false;}if (indexLienOuvert>=0){GEN_masqueBulle(false);if (enAvant){numTemp=indexLienOuvert+1;} else {numTemp=indexLienOuvert-1;}}var lesa=PF_donneObjet("STY_texteCours").getElementsByTagName("a");var trouveLien=false;while (numTemp<lesa.length && !trouveLien && numTemp>=0){var oLien=lesa.item(numTemp);if (oLien.className.indexOf("STY_lienComt")>=0){var lref=oLien.href;if (lref.indexOf("afficherDetail")>0){var numCmt=lref.substring(lref.indexOf("(")+2,lref.indexOf(")")-1);var objCmt=donneCmtID("divCmt"+numCmt);if (objCmt!=null){if (!objCmt.estAffiche && objCmt.orign!="clic"){CRS_afficherDetail(numCmt);trouveLien=true;indexLienOuvert=numTemp;}}}}if (oLien.className.indexOf("STY_paraBasculeTitre")>=0 && oLien.className.indexOf("STY_paraBasculeTitreOuvert")<0){var lref=oLien.href;if (lref.indexOf("basculerPara")>0){trouveLien=true;indexLienOuvert=numTemp;var numCmt=lref.substring(lref.indexOf("(")+1,lref.indexOf(")"));GEN_masquerParaBasc();GEN_basculerPara(numCmt);}}if (enAvant){numTemp++;} else {numTemp--;}}if (!trouveLien && numTemp>=lesa.length){indexLienOuvert=-1;}return trouveLien;}function donneCmtID(idCmt){var oCmt=null;for (var i=0;i<leCours.commentaires.length;i++){if (leCours.commentaires[i].id==idCmt){oCmt=leCours.commentaires[i];}}return oCmt;}function CRS_cliquePage(event){if (animationActive() && !delaiAnimEnCours){appliqueEffet(true);} else {actionDetecte();}/*if (animationActive()){if (!delaiAnimEnCours && !appliqueEffet()){if (!leCours.desactiveSuivant){STG_allerSuivant();}} else {actionDetecte();}}*/}function GEN_clavier(){if (animationActive() && appliqueEffet(true)){return ;}if (!desactiveSuivantPg){STG_allerSuivant();}}function animationActive(){return (leCours && (leCours.animListes || leCours.animImages));}function appliqueEffet(versAvant){var existeEffet=false;if (leCours.animListes){var oZnC=PF_donneObjet("STY_texteCours");var lesitems=oZnC.getElementsByTagName("li");if (lesitems.length>0){if (!itemListeCourant){if (versAvant){itemListeCourant=lesitems[0];itemListeCourant.className="STY_itemListeCourant";actionDetecte();return true;} else {return false;}} var n=0;if (!versAvant){n=lesitems.length-1;}while (n<lesitems.length && n>=0){if (versAvant){lesitems[n].className="STY_itemListeApres";} else {lesitems[n].className="STY_itemListeAvant";}if (lesitems[n]==itemListeCourant){if (versAvant){n++;}else {n--;}if (n<lesitems.length && n>=0){itemListeCourant=lesitems[n];itemListeCourant.className="STY_itemListeCourant";actionDetecte();return true;}}if (versAvant){n++;}else {n--;}}}}if (leCours.animImages){var oZnC=PF_donneObjet("STY_texteCours");var oFondu=PF_donneObjet("imgAnimFonduTemp");if (oFondu){oFondu.parentNode.removeChild(oFondu);}var lesitems=oZnC.getElementsByTagName("img");if (!versAvant && imageAnimCourant==null){return false;}if (lesitems.length>1){var n=0;if (!versAvant){n=lesitems.length-1;}while (n<lesitems.length && n>=0){if (lesitems[n]==imageAnimCourant){if (versAvant){n++;}else {n--;}if (n<lesitems.length && n>=0){var imgsuiv1=lesitems[n];masquerImageAnim(imageAnimCourant);imageAnimCourant=imgsuiv1;afficherImageAnim(imageAnimCourant);actionDetecte();return true;}}if (versAvant){n++;}else {n--;}}}}return existeEffet;}function CRS_masquerAnims(){if (leCours.animListes){var oZnC=PF_donneObjet("STY_texteCours");var lesitems=oZnC.getElementsByTagName("li"); var n=0;while (n<lesitems.length){lesitems[n].className="STY_itemListeAvant";n++;}}if (leCours.animImages){var oZnC=PF_donneObjet("STY_texteCours");var lesitems=oZnC.getElementsByTagName("img");if (lesitems.length>1){var n=1;imageAnimCourant=null;while (n<lesitems.length){masquerImageAnim(lesitems[n]);n++;}afficherImageAnim(lesitems[0]);}}}function GEN_masquerParaBasc(){var lesa=document.getElementsByTagName("a");for (var i=0;i<lesa.length;i++){var oLien=lesa.item(i);if (oLien.className.indexOf("STY_paraBasculeTitre")>=0){var lref=oLien.href;if (lref.indexOf("basculerPara")>0){var numCmt=lref.substring(lref.indexOf("(")+1,lref.indexOf(")"));if (PF_donneObjet('corpsPB'+numCmt).style.display=="block"){GEN_basculerPara(numCmt);}}}}}function afficherImageAnim(oImg){oImg.style.display="";for (var i=0;i<tabZonesLien.length;i++){var oZone=tabZonesLien[i];if (oZone.refImg==oImg.id){oZone.masqueAnim=false;oZone.placer();}}}function masquerImageAnim(oImg){if (imageAnimCourant){if ((typeof(oImg.style.MozTransition)=="string" || typeof(oImg.style.webkitTransition)=="string")){if (TRANSITION_IMG_ANIM_S!="0"){var oFondu=oImg.cloneNode(true);oFondu.style.position="absolute";oFondu.style.left=oImg.offsetLeft+"px";oFondu.style.top=oImg.offsetTop+"px";oFondu.setAttribute("id","imgAnimFonduTemp");var oPere=oImg.parentNode;oPere.appendChild(oFondu);setTimeout(demarreFonduAnimImage,50);}}}oImg.style.display="none";for (var i=0;i<tabZonesLien.length;i++){var oZone=tabZonesLien[i];if (oZone.refImg==oImg.id){oZone.masqueAnim=true;PF_masquerDiv(oZone.id);}}}var TRANSITION_IMG_ANIM_S="0.5";function demarreFonduAnimImage(){var oFondu=PF_donneObjet("imgAnimFonduTemp");if (oFondu){var vtrans="opacity "+TRANSITION_IMG_ANIM_S+"s";oFondu.style.webkitTransition=vtrans;oFondu.style.MozTransition=vtrans;oFondu.style.opacity=0;setTimeout(supprimeFonduAnimImage,Number(TRANSITION_IMG_ANIM_S)*1000);}}function supprimeFonduAnimImage(){var oFondu=PF_donneObjet("imgAnimFonduTemp");if (oFondu){oFondu.parentNode.removeChild(oFondu);}}function toucheRetourBloquee(){if (etatPrecedent && !attrapeEvtClic){STG_allerPrecedent();}}function GEN_activerSuivantDemar(){if (GEN_suivantPossible()){activerBoutonSuivant();}}function STG_allerPrecedent(){if (etatPrecedent&&(!MODE_EDIT)){attrapeEvtClic=true;parent.SCO_pagePrecedente();}}function desactiverBoutonValider(){GEN_desactiveBouton("Valider",EXO_valider);GEN_etatChampBouton(false,"EXO_valider");if (oFlashNavBar){try{oFlashNavBar.MOS_enableBtnSubmit(false);}catch(e){}}}
