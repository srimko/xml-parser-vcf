<?xml version="1.0" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:template match="exo/cadres/div"><div onselectstart="return false"><xsl:attribute name="style"><xsl:value-of select="@style"/>;position:absolute;display:block</xsl:attribute><xsl:copy-of select="@class"/><xsl:attribute name="id">exoGD<xsl:value-of select="@id"/></xsl:attribute><xsl:if test="starts-with(@id,'d')"><xsl:attribute name="onmousedown">GD_debutDep(event,'<xsl:value-of select="@id"/>')</xsl:attribute></xsl:if><xsl:apply-templates/></div></xsl:template><xsl:template match="cadres//div[starts-with(@class,'GD_labelDIV')]" priority="2"></xsl:template><xsl:template match="exo/cadres/div//img"><img onmousedown="libereMoz(event)"><xsl:copy-of select="@*"/><xsl:attribute name="src">../media/<xsl:value-of select="@src"/></xsl:attribute></img></xsl:template><xsl:template name="JSCRIPT_CSS_GD"><xsl:call-template name="JSCRIPT_CSS_EXO"/><script type="text/javascript" src="../../MosMtr/scripts/contenu/ClasseExerciceGD.js"></script><script type="text/javascript" src="../../MosMtr/scripts/contenu/IC_exerciceGD.js"></script><script type="text/javascript">function entrerDonnees(){mobileCourant=PF_donneObjet('exoGDd1');exo = new ExerciceGD(); exo.init();exo.scoreTotal=<xsl:apply-templates select="exo/@score"/>;exo.retourManque = <xsl:value-of select="exo/@retourManque='1'"/>;exo.retourIncorrect = <xsl:value-of select="exo/@retourIncorrect='1'"/>; <xsl:for-each select="exo/cadres/div"> <xsl:variable name="lid" select="@id"/> <xsl:choose> <xsl:when test="@class='GD_labelDIV'"> </xsl:when> <xsl:when test="starts-with($lid,'d')"> exo.tabDeplaces[exo.tabDeplaces.length]='<xsl:value-of select="$lid"/>'; exo.tabTitreDeplaces[exo.tabTitreDeplaces.length]="<xsl:value-of select="//div[@id=concat('labelGD',$lid)]/text()"/>"; </xsl:when><xsl:otherwise> exo.tabCibles[exo.tabCibles.length]='<xsl:value-of select="$lid"/>'; exo.tabTitreCibles[exo.tabTitreCibles.length]="<xsl:value-of select="//div[@id=concat('labelGD',$lid)]/text()"/>"; </xsl:otherwise></xsl:choose> </xsl:for-each> exo.decalageX='<xsl:value-of select="exo/@decalageX"/>'; exo.decalageY='<xsl:value-of select="exo/@decalageY"/>'; <xsl:for-each select="exo/paires/paire"><xsl:sort select="@decalageX" order="descending"/>exo.tabPaires[exo.tabPaires.length]=new PaireGD('<xsl:value-of select="translate(@idDeplace,'5123789','3791528')"/>','<xsl:value-of select="translate(@idCible,'5123789','3791528')"/>','<xsl:value-of select="@styleR"/>','<xsl:value-of select="@decalageX"/>','<xsl:value-of select="@decalageY"/>','<xsl:value-of select="@poids"/>'); </xsl:for-each> for (var i=0; i&lt;exo.tabDeplaces.length ; i++){var oDiv=PF_donneObjet("exoGD"+exo.tabDeplaces[i]);if (oDiv!=null){exo.tabDeplacesX[i]=oDiv.style.left;exo.tabDeplacesY[i]=oDiv.style.top;}} <xsl:if test="not(exo/@creerPairesFausses='non')">exo.creerPairesFausses();</xsl:if><xsl:call-template name="AFFECTE_INTERACTIONS"/>}</script></xsl:template> </xsl:stylesheet>
