var pos,nPos,diff;var limiteD,limiteF;var mobileCourant;var deplacement;var idCurseurC;var tailleCurseur,tailleCurseur2;var tailleEchelle;var verticalC;var oCompteurC;var uniteC='';var oCursCourant=null;function detecterActionSurCurseurs(){var existeNonDeplace=false;var existeDeplace=false;for (var i=0;i<exo.tabCurseurs.length;i++){if (exo.tabCurseurs[i].etatDeplace){existeDeplace=true;}else {existeNonDeplace=true;}}if (existeDeplace && (!parent.oSco.forcerReponse || !existeNonDeplace)){actionDetecte();}}function CURS_debutDep(evt,id,touchage) {GEN_cliqueInterne(evt);if (parent.oSco.config_navigateur=="Netscape"){evt.preventDefault();}if (exo.actif){if (!deplacement){deplacement=true;window.desactiveBalayagePg=true;idCurseurC=id;oCursCourant=exo.donneObjCurs(id);oCursCourant.etatDeplace=true;detecterActionSurCurseurs();verticalC=oCursCourant.vertical;uniteC=oCursCourant.unite;mobileCourant=PF_donneObjet('divCurseur'+id);mobileCourant.className="";oCompteurC=PF_donneObjet('divCompteur'+id);if (oCompteurC!=null){var oarrond=PF_donneObjet(oCompteurC.id+"fondContenu");if (oarrond!=null){oCompteurC=oarrond;}}limiteD=0;tailleCurseur=oCursCourant.tailleCurseur;tailleEchelle=oCursCourant.tailleEchelle;if (verticalC){if (parent.oSco.config_navigateur=="Netscape"){pos=evt.clientY;if (touchage){pos=evt.touches[0].pageY;}} else {pos=window.event.y;}} else {if (parent.oSco.config_navigateur=="Netscape"){pos=evt.clientX;if (touchage){pos=evt.touches[0].pageX;}} else {pos=window.event.x;}}tailleCurseur2=Math.round(tailleCurseur/2)-1;limiteF=tailleEchelle-tailleCurseur;tailleEchelle-=tailleCurseur;}}}function CURS_deplaceDiv(evt,touchage) {if (deplacement){var valpos;if (verticalC){if (parent.oSco.config_navigateur=="Netscape"){nPos=evt.clientY;if (touchage){nPos=evt.touches[0].pageY;}} else {nPos=window.event.y;}diff=nPos-pos;valpos=parseInt(mobileCourant.style.top)+diff;} else {if (parent.oSco.config_navigateur=="Netscape"){nPos=evt.clientX;if (touchage){nPos=evt.touches[0].pageX;}} else {nPos=window.event.x;}diff=nPos-pos;valpos=parseInt(mobileCourant.style.left)+diff;}if (Math.abs(diff)<90){if ((verticalC)&&(CURS_estDansLimites(valpos))){mobileCourant.style.top=valpos+"px";} else if (CURS_estDansLimites(valpos)){mobileCourant.style.left=valpos+"px";}}}}function CURS_finDep() {if (deplacement){deplacement=false;setTimeout("window.desactiveBalayagePg=false",300);exo.effacerMarqueSuggestionRef(oCursCourant.id);oCursCourant.juger(true);if (mobileCourant){var ajVert="0";if (oCursCourant.vertical){ajVert="1"}mobileCourant.className="STY_divImgAnimCurs"+ajVert;}}}function CURS_estDansLimites(pos0){var res=true;var valActuelle;if (limiteD>pos0){res=false;if (verticalC){valAct=oCursCourant.valMax;} else {valAct=oCursCourant.valMin;}} else if (pos0>limiteF){res=false;if (verticalC){valAct=oCursCourant.valMin;} else {valAct=oCursCourant.valMax;}} else {pos=nPos;if (verticalC){valAct=oCursCourant.valeurRelle((tailleEchelle-pos0)/tailleEchelle);} else {valAct=oCursCourant.valeurRelle(pos0/tailleEchelle);}} changeCompteur(valAct);oCursCourant.valeurActuelle=valAct;return res;}function changeCompteur(val){if (oCompteurC!=null){oCompteurC.innerHTML=localeNb(val)+uniteC;}}function CURS_clicEchelle(evt,id){GEN_cliqueInterne(evt);if (exo.actif){deplacement=true;idCurseurC=id;oCursCourant=exo.donneObjCurs(id);oCursCourant.etatDeplace=true;detecterActionSurCurseurs();verticalC=oCursCourant.vertical;uniteC=oCursCourant.unite;mobileCourant=PF_donneObjet('divCurseur'+id);oCompteurC=PF_donneObjet('divCompteur'+id);if (oCompteurC!=null){var oarrond=PF_donneObjet(oCompteurC.id+"fondContenu");if (oarrond!=null){oCompteurC=oarrond;}}limiteD=0;tailleCurseur=oCursCourant.tailleCurseur;tailleEchelle=oCursCourant.tailleEchelle;var oEvt=evt;if (window.event){oEvt=window.event;}oEvt.cancelBubble=true;var nPos;if (verticalC){if (parent.oSco.config_navigateur=="Netscape"){nPos=evt.layerY;if (!evt.layerY){nPos=evt.y;}} else {nPos=window.event.y;}} else {if (parent.oSco.config_navigateur=="Netscape"){nPos=evt.layerX;if (!evt.layerX){nPos=evt.x;}} else {nPos=window.event.x;}}var valPos=nPos-tailleCurseur;CURS_estDansLimites(nPos);var divCurseur=PF_donneObjet('divCurseur'+oCursCourant.id);var ajVert="0";if (oCursCourant.vertical){ajVert="1"}divCurseur.className="STY_divImgAnimCurs"+ajVert;oCursCourant.deplaceCurseur(oCursCourant.valeurActuelle);CURS_finDep();}}function DomaineCurseur(min,max,correction) { this.min=min; this.max=max; this.correction=correction; this.estInclus=DCURS_estInclus;this.curseurDedans=false;}function DCURS_estInclus(valeurCourante){var res=false;this.curseurDedans=false;if ((this.min<=valeurCourante)&&(valeurCourante<=this.max)){res=true; this.curseurDedans=true;}return res;}
