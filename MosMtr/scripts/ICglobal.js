var oFlashNavBar=null;function GEN_initFlashNavBar(){var oDiv=PF_donneObjet("FlashNavBar");if (oDiv==null){oDiv=window.document;}var tabWM=oDiv.getElementsByTagName('object');if (tabWM.length>0){var objet=tabWM[0];oFlashNavBar=objet;if (parent.oSco.config_navigateur=="Netscape"){oFlashNavBar=objetPlugMozz(objet);}}if (GEN_precedentPossible()){activerBoutonPrecedent();}GEN_activerSuivantDemar();}function donneLex(num){return parent.lexique.lexs[num];}function donneTitreStage(){return parent.oSco.titreStage;}function donneTitrePage(){return document.title;}function donneLangue(){return parent.oSco.langue;}function donneIdU(){return parent.oSco.idUtil;}function donneIdStg(){return parent.oSco.codeStage;}function donneIdSco(){return parent.oSco.identifiant;}function donneNomModuleCourant(){return (parent.oSco.nomModuleCourant);}function donneDateCourante(){return (parent.oSco.donneDate(parent.oSco.dateCourante));}function donneDroits(){return parent.oSco.nomEntreprise;}function donneVersion(){return parent.oSco.version;}function donneNomEtapeCourante(){return parent.oSco.titre;}function donneIdPage(){return codePage;}function GLOBAL_ouvrirGlossaire(){var largeur = 10;var hauteur = 10;var position="left="+largeur+",top="+hauteur+",screenX="+largeur+",screenY="+hauteur+",";var extNative=parent.oSco.version;var locGFlo=parent.RACINE_stage;if (parent.oSco.refGlo!=''){locGFlo=parent.RACINE_stage+"../"+parent.oSco.refGlo+"/";extNative=parent.oSco.refGloExt;}var src="MosMtr/ressources/style/glossaire.htm?ver="+extNative;var taille="width=800,height=560";if (screen.width>1000){taille="width=960,height=680";}var fen=window.open(locGFlo+src,'Glossaire','toolbar=no,status=no,menubar=no,'+taille+','+position+'scrollbars=no,resizable=yes');fen.focus();}function GLOBAL_allerPage(refLien){var indexB=refLien.indexOf('/');var numPg=-1;if (indexB>0){var enFenetre=false;var indB=refLien.indexOf('[_blank]');var laRef="";if (indB>0){enFenetre=true;laRef=refLien.substring(indB+8);refLien=refLien.substring(0,indB);if (laRef!=''){if (laRef.indexOf('http://')!=0){laRef=parent.RACINE_stage+laRef;}}}var refPage=refLien.substring(indexB+1,refLien.length); var codeEtape=refLien.substring(0,indexB);if (enFenetre){if (laRef==""){laRef=parent.RACINE_stage+"sco/"+codeEtape+".html?api=0";}if (refPage!=''){laRef+='&idPg='+refPage;}var oEnFen=parent.open(laRef,"blk"+codeEtape+refPage,"toolbar=no,resizable=yes,menubar=no,location=no,status=no,"+parent.oSco.posFenLocale);return oEnFen.focus();} else {if (codeEtape==parent.oSco.identifiant && refPage!=''){var numPg=parent.oSco.numeroPage(refPage);var passeB=true;if (parent.oSco.etatEvaluation){var oPg=parent.oSco.donnePage(numPg);while (oPg!=null&& (!oPg.validePrerequis()&&oPg.prerequis!="SKIP")){numPg++;oPg=parent.oSco.donnePage(numPg);}if (oPg==null){passeB=false;}}if (passeB){return parent.SCO_allerPage(numPg);}} else {if (parent.APIgetValue("adl.nav.request_valid."+parent.SCO_actionAllerA()+".{target="+codeEtape+"}")=="true"){if (parent.surMosLMS && refPage!=''){parent.parent.planLMS.pageSpecifieeParLienPage=refPage;}parent.APIsetValue("adl.nav.request","{target="+codeEtape+"}"+parent.SCO_actionAllerA());return parent.SCO_quitter();}}}}if (parent.APIgetValue("adl.nav.request_valid."+parent.SCO_actionAllerA()+".{target="+refLien+"}")=="true"){parent.APIsetValue("adl.nav.request","{target="+refLien+"}"+parent.SCO_actionAllerA());return parent.SCO_quitter();}if (parent.SCO_actionAllerA()=="jump"){if (parent.APIgetValue("adl.nav.request_valid.choice.{target="+refLien+"}")=="true"){parent.APIsetValue("adl.nav.request","{target="+refLien+"}choice");return parent.SCO_quitter();}}}function GEN_placerZonesLien(){if (existeMosMap){for (var i=0;i<tabZonesLien.length;i++){tabZonesLien[i].placer();}}}function enableSwipeGesture(){var windowWidth = window.screen.width < window.outerWidth ? window.screen.width : window.outerWidth;if (windowWidth < 500){return false;}if (!document.body.addEventListener){return false;}return true;}var disableSwipeListener=false;function GLOBAL_initBarreBouton(type){parent.SCO_enrHistorique();GEN_etatChampBouton(false,"STG_allerSuivant");GEN_etatChampBouton(false,"STG_allerPrecedent");GEN_etatChampBouton(false,"EXO_valider");GEN_etatChampBouton(false,"STG_initialiser");if (GEN_precedentPossible(type)){activerBoutonPrecedent();}if ((parent.surMosLMS)&&(parent.parent.baseASP==null)){PF_afficherDiv('STY_zoneLocale');}if (!parent.agirSurLMS){PF_masquerDiv('STY_zoneLMSouLMSLocal');PF_afficherDiv('STY_zoneSansLMS');}if (enableSwipeGesture()){var slft = Hammer(document.body).on("swipeleft",function(event){if (window.desactiveBalayagePg||window.deplacement){return;} actionTouchePgSuivante(true); }); var srght = Hammer(document.body).on("swiperight",function(event){if (window.desactiveBalayagePg||window.deplacement){return;} actionTouchePgPrecedente(true); });}if ((navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("iPad")>0||navigator.userAgent.indexOf("iPod")>0)&&navigator.userAgent.indexOf("AppleWebKit")>0){document.body.className+=" STY_iPadBody";}}function changeImgBtn(oImg,source){if (oImg!=null){if (parent.oSco.navigIE6){oImg.width=oImg.offsetWidth;oImg.height=oImg.offsetHeight;oImg.src="../../MosMtr/gen/blanc.gif";oImg.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+source+"',sizingMethod='image')";} else {oImg.src=source;}}}function activerBoutonInit(){GEN_activeBouton("Init",11,STG_initialiser);GEN_etatChampBouton(true,"STG_initialiser");if (oFlashNavBar){try{oFlashNavBar.MOS_enableBtnReset(true);}catch(e){}}}function GEN_activeBouton(demiNom,lex,fonction){var oImg=document.images["imgBouton"+demiNom];if ((oImg!=null)&&(oImg.src.indexOf("gen/bouton"+demiNom+"_of.")<0)){if (parent.oSco.config_navigateur=="IE"){oImg.detachEvent("onclick", fonction);oImg.detachEvent("onmouseover", boutonSourisDessus);oImg.detachEvent("onmouseout", boutonSourisDehors);oImg.attachEvent("onclick", fonction);oImg.attachEvent("onmouseover", boutonSourisDessus);oImg.attachEvent("onmouseout", boutonSourisDehors);} else {oImg.removeEventListener("click", fonction,false);oImg.removeEventListener("mouseover", boutonSourisDessus,false);oImg.removeEventListener("mouseout", boutonSourisDehors,false);oImg.addEventListener("click", fonction,false);oImg.addEventListener("mouseover", boutonSourisDessus,false);oImg.addEventListener("mouseout", boutonSourisDehors,false);}try{oImg.style.cursor="pointer";}catch(e){}oImg.title=donneLex(lex);changeImgBtn(oImg,chemin_img+'gen/bouton'+demiNom+'_of.'+parent.oSco.formatBouton);}}function GEN_desactiveBouton(demiNom,fonction){var oImg=document.images["imgBouton"+demiNom];if (oImg!=null){if (parent.oSco.config_navigateur=="IE"){oImg.detachEvent("onclick", fonction);oImg.detachEvent("onmouseover", boutonSourisDessus);oImg.detachEvent("onmouseout", boutonSourisDehors);} else {oImg.removeEventListener("click", fonction,false);oImg.removeEventListener("mouseover", boutonSourisDessus,false);oImg.removeEventListener("mouseout", boutonSourisDehors,false);}try{oImg.style.cursor="default";}catch(e){}changeImgBtn(oImg,chemin_img+'gen/bouton'+demiNom+'.'+parent.oSco.formatBouton);}}function chopeEtStpEvt(evt){var declenc;try {if (parent.oSco.config_navigateur=="IE"){evt=window.event;evt.cancelBubble=true;declenc=evt.srcElement;}else {declenc=evt.target;evt.stopPropagation();}}catch(e){}return declenc;}function bloqClicItrn(){evtCliqueInterne=false;setTimeout("evtCliqueInterne=true",200);}function boutonSourisDessus(evt){var oImg=chopeEtStpEvt(evt);if (oImg.nodeName.toLowerCase()=="img"){changeImgBtn(oImg,chemin_img+'gen/b'+oImg.name.substring(4)+'_on.'+parent.oSco.formatBouton);}}function boutonSourisDehors(evt){var oImg=chopeEtStpEvt(evt);if (oImg.nodeName.toLowerCase()=="img"){changeImgBtn(oImg,chemin_img+'gen/b'+oImg.name.substring(4)+'_of.'+parent.oSco.formatBouton);}}function desactiverBoutonInit(){GEN_desactiveBouton("Init",STG_initialiser);GEN_etatChampBouton(false,"STG_initialiser");if (oFlashNavBar){try{oFlashNavBar.MOS_enableBtnReset(false);}catch(e){}}}function activerBoutonSuivant(){GEN_activeBouton("Suivant",6,STG_allerSuivant);GEN_etatChampBouton(true,"STG_allerSuivant");etatSuivant=true;if (oFlashNavBar){try{oFlashNavBar.MOS_enableBtnNext(true);}catch(e){}}}function desactiverBoutonSuivant(){etatSuivant=false;GEN_desactiveBouton("Suivant",STG_allerSuivant);GEN_etatChampBouton(false,"STG_allerSuivant");if (oFlashNavBar){try{oFlashNavBar.MOS_enableBtnNext(false);}catch(e){}}}function activerBoutonPrecedent(){GEN_activeBouton("Precedent",7,STG_allerPrecedent);GEN_etatChampBouton(true,"STG_allerPrecedent");if (oFlashNavBar){try{oFlashNavBar.MOS_enableBtnPrevious(true);}catch(e){}}}var passeZone=0;function GLOBAL_cliqueLienZone(idZone){if (passeZone==0){ var zone=PF_donneObjet(idZone);var liens=zone.getElementsByTagName('a');if (liens.length>0){var lien=liens.item(0); if (parent.oSco.config_navigateur=="Netscape"){var txtlien=lien.href;eval(txtlien);} else {passeZone=1;lien.click();}}} else {passeZone=0;}}function GEN_lireMediaZone(nomZone,arret,premInitZoneCtn,stopTm){var oDiv=PF_donneObjet(nomZone);if (oDiv!=null){var dejaBtnInit=false;var tabWM=new Array();var tabWM0=oDiv.getElementsByTagName('object');for (var i=0;i<tabWM0.length;i++){tabWM.push(tabWM0[i]);}tabWM0=oDiv.getElementsByTagName('video');for (var i=0;i<tabWM0.length;i++){tabWM.push(tabWM0[i]);}tabWM0=oDiv.getElementsByTagName('audio');for (var i=0;i<tabWM0.length;i++){tabWM.push(tabWM0[i]);}for (var i=0;i<tabWM.length;i++){var objet=tabWM[i];var actionMedia=false;var objetPlug=objet;if (parent.oSco.config_navigateur=="Netscape" && objet.tagName.toLowerCase()=="object"){objetPlug=objetPlugMozz(objet);if (objetPlug.height=="100%"){objetPlug.height=objetPlug.parentNode.parentNode.offsetHeight;}}var lid=objet.id;if (lid==null){lid='';}var prendObjetZCtn=false;if (premInitZoneCtn!=null && premInitZoneCtn=="non"){if (arret){prendObjetZCtn=true;}else {if (objetPlug.Movie && objetPlug.Movie.indexOf("&autostart=true")>0){prendObjetZCtn=true;}if (objetPlug.src && objetPlug.src.indexOf("&autostart=true")>0){prendObjetZCtn=true;}}}if (!arret && !dejaBtnInit){var lsrc="";if (objetPlug.Movie){lsrc=objetPlug.Movie;}if (objetPlug.src){lsrc=objetPlug.src;}if (lsrc.indexOf("&autostart=true")>0){dejaBtnInit=true;setTimeout(activerBoutonInit,700);}}if (arret&&objet.className.indexOf('_flvPly')>0){prendObjetZCtn=true;}if (objet.className.indexOf('_true')>0||lid.indexOf('clipSTY')==0||prendObjetZCtn){if (arret){if (objet.className.indexOf('_flvPly')>0){try {objetPlug.sendEvent("stop");actionMedia=true;}catch(e){}}if (!actionMedia){try {objetPlug.pause();actionMedia=true;}catch(e){}try {objetPlug.Stop();actionMedia=true;}catch(e){}try {objetPlug.controls.Stop();actionMedia=true;}catch(e){}try {objetPlug.StopPlay();actionMedia=true;}catch(e){}}} else {if (objet.className.indexOf('_flvPly')>0){try {objetPlug.sendEvent("playitem","0");actionMedia=true;}catch(e){}if (!actionMedia){if (objetPlug.Movie){objetPlug.Movie+="&autostart=true";}if (objetPlug.src){objetPlug.src+="&autostart=true";}}}if (!actionMedia){try {objetPlug.play();actionMedia=true;}catch(e){}try {objetPlug.Rewind();}catch(e){}try {objetPlug.Play();actionMedia=true;}catch(e){}if (!actionMedia){ try {objetPlug.controls.currentPosition=0;objetPlug.controls.Play();actionMedia=true;}catch(e){}}if (!actionMedia){ try {objetPlug.DoPlay();actionMedia=true;}catch(e){}}}}if (!actionMedia){if (objetPlug.className.indexOf("objQT_")==0 && !stopTm){setTimeout("GEN_lireMediaZone('"+nomZone+"',null,null,true)",500);} else {var lhtml=objet.innerHTML;if (arret){var gard=oDiv.innerHTML;oDiv.innerHTML="";oDiv.innerHTML=gard;} else {lhtml=lhtml.replace(/ play="false"/gi,' play="true"');lhtml=lhtml.replace(/ autostart="false"/gi,' autostart="true"');lhtml=lhtml.replace(/ autoplay="false"/gi,' autoplay="true"');try {objet.innerHTML=lhtml;} catch(e1) {try {objet.outerHTML=lhtml;} catch(e2) {}}}}}}}}}function objetPlugMozz(obj){var retO=document.embeds[obj.id];return retO;}function localeNb(nbr){var res=new String(nbr);if (res.indexOf("-")==0){res=String.fromCharCode(8722)+res.substring(1);}var clang=parent.oSco.langue.substring(0,2);if (clang=='fr'){res=res.replace("%",String.fromCharCode(8194)+'%');}if (parent.donnePays()!="CH"){if (clang=='fr'||clang=='de'||clang=='it'||clang=='pt'||clang=='es'||clang=='nl'||clang=='pl'){res=res.replace(".",",");}}return res;}function GEN_etatChampBouton(active,nomFonc){var lesboutons=document.getElementsByTagName("button");for (var i=0;i<lesboutons.length;i++){var oBtn=lesboutons.item(i);var chg=new String(PF_attr(oBtn,"onclick"));if (chg.indexOf(nomFonc)>=0){oBtn.disabled=!active;break;}}}function IC_ouvrirDiplomeLMS(){parent.parent.LMS_afficherDiplome();}function IC_openDoc(nomFich,optionsFen){window.open(parent.RACINE_stage+"contenu/pages/"+nomFich,nomFich.replace(/\W/g),"menubar=no,toolbar=no,location=no,status=no,"+optionsFen);}function IC_openSco(codeSco,optionsFen){window.open(parent.RACINE_stage+"sco/"+codeSco+".html","fensco"+codeSco,"menubar=no,toolbar=no,location=no,status=no,"+optionsFen);}function setUserVariable(idVar,val){parent.SCO_modifAllocation(idVar,val,"learner");}function setCourseVariable(idVar,val){parent.SCO_modifAllocation(idVar,val,"course");}function getUserVariable(idVar){return parent.SCO_donneAllocation(idVar,"learner");}function getCourseVariable(idVar){return parent.SCO_donneAllocation(idVar,"course");}function getAudioLevel(){if (parent.surMosLMS){return parent.parent.niveauAudio;} return 1;}function setAudioLevel(num){if (parent.surMosLMS){parent.parent.changeNiveauAudio(num);}}function initCadreContenuInterne(){var obj=PF_donneObjet("STY_cadreInterneDyn");if (obj){if (obj.getElementsByTagName("iframe").length==0){obj.style.visibility="visible";var srcIfrm=parent.XML_texteNoeud(obj).replace(/\s+/g,"");srcIfrm=srcIfrm.replace(/\xA0/g,"");srcIfrm=srcIfrm.replace("USER_ID",parent.oSco.idUtil);srcIfrm=srcIfrm.replace("COURSE_ID",parent.oSco.codeStage);srcIfrm=srcIfrm.replace("ITEM_ID",parent.oSco.identifiant);srcIfrm=srcIfrm.replace("USER_TIME_OFFSET",(new Date()).getTimezoneOffset());srcIfrm=srcIfrm.replace("USER_LANGUAGE",parent.oSco.langue);var largw=obj.style.width;if (largw=="" && obj.offsetWidth>1){largw=obj.offsetWidth+"px";}if (largw==""){largw="100%";}var hautr=obj.style.height;if (hautr=="" && obj.offsetHeight>1){hautr=obj.offsetHeight+"px";}if (hautr==""){hautr="100%";}obj.innerHTML='<iframe frameborder="0" style="width:'+largw+';height:'+hautr+'" src="'+srcIfrm+'"></iframe>';}}}(function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;i.length>r;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which)&&(o=!0),u.match(/touch|pointer/)&&(s=!0);var h=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===r?r=c:c=r,n.call(i.detection,a.collectEventData(t,e,c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var r=this.getTouchList(n,e),o=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(r),timeStamp:(new Date).getTime(),target:n.target,touches:r,eventType:e,pointerType:o,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;i.length>r;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n.options.transform_min_scale>r&&n.options.transform_min_rotation>o)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),o>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))})(this);
