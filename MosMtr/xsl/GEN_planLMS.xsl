<?xml version="1.0" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_v1p3"><xsl:output method="html" version="4.0" indent="no" doctype-public="-//W3C//DTD HTML 4.0 Strict//EN"/><xsl:variable name="chemImg" select="//*[local-name()='organization']/@chemImg"/><xsl:template match="*[local-name()='organization']"> <xsl:apply-templates select="*[local-name()='item']" mode="itemXSL"> <xsl:with-param name="niveau">1</xsl:with-param> </xsl:apply-templates></xsl:template><xsl:template match="*[local-name()='item']" mode="itemXSL"><xsl:param name="niveau"/><xsl:variable name="itemInvisible" select="(@isvisible) and (@isvisible='false')"/><xsl:variable name="valVisib"><xsl:choose><xsl:when test="$itemInvisible">0</xsl:when><xsl:otherwise>1</xsl:otherwise></xsl:choose></xsl:variable><xsl:choose><xsl:when test="child::*[local-name()='item']"><div id="div{@nom}"><xsl:if test="$itemInvisible"><xsl:attribute name="style">display:none</xsl:attribute></xsl:if><xsl:attribute name="class"><xsl:choose><xsl:when test="($niveau&lt;2)">STY_planTitreModule</xsl:when><xsl:otherwise>STY_planTitreEtape</xsl:otherwise></xsl:choose></xsl:attribute><img id="img{@nom}" onclick="basculeItem('{@nom}')" class="STY_tdImgPlanModule" src="{$chemImg}planModule0.png"/><a onmouseover="window.status='';return true;" class="STY_planLienTitreEtape" id="lienP{@nom}" href="javascript:clicItem('{@nom}')"> <xsl:if test="$niveau=1"><xsl:attribute name="class">STY_planLienTitreModule</xsl:attribute></xsl:if> <xsl:value-of select="*[local-name()='title']"/> </a></div><div id="divFils{@nom}"><xsl:if test="not($itemInvisible)"><xsl:attribute name="style">display:none</xsl:attribute><xsl:attribute name="class"><xsl:choose><xsl:when test="($niveau&lt;2)">STY_planEtapes</xsl:when><xsl:otherwise>STY_planPages</xsl:otherwise></xsl:choose></xsl:attribute></xsl:if> <xsl:apply-templates select="*[local-name()='item']" mode="itemXSL"> <xsl:with-param name="niveau"><xsl:value-of select="$niveau+$valVisib"/></xsl:with-param> </xsl:apply-templates></div></xsl:when><xsl:otherwise><xsl:variable name="idRef" select="@identifierref"/><xsl:variable name="ressRef" select="//*[local-name()='resource' and @identifier=$idRef]"/><div id="div{@nom}" class="STY_planTitrePage"><xsl:if test="$itemInvisible"><xsl:attribute name="style">display:none</xsl:attribute></xsl:if><a onmouseover="window.status='';return true" class="STY_planLienTitrePage" id="lienP{@nom}" href="javascript:clicItem('{@nom}')"><xsl:attribute name="class">STY_planLienTitrePage <xsl:choose><xsl:when test="$ressRef/@adlcp:scormType='asset'">STY_planLienDocument</xsl:when><xsl:when test="*[local-name()='sequencing']/*[local-name()='objectives']/*[local-name()='primaryObjective']/*[local-name()='minNormalizedMeasure']">STY_planLienEvaluation</xsl:when><xsl:otherwise>STY_planLienActivite</xsl:otherwise></xsl:choose></xsl:attribute><xsl:value-of select="*[local-name()='title']"/></a></div></xsl:otherwise></xsl:choose></xsl:template></xsl:stylesheet>
