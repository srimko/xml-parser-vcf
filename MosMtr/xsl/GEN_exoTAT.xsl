<?xml version="1.0" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:variable name="decalY"><xsl:choose><xsl:when test="(count(/exo//trou)+number(/exo/@score))mod 2 = 1">1</xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:variable><xsl:template match="trou"><input type="text" onkeyup="actionDetecteTrou(this)" onfocus="focusChamp(this)" onkeypress="return tapeDansChamp(event)" onkeydown="return tapeDansChamp(event)" class="STY_champTAT" id="champTrou{@id}" onmousedown="actionEffacerClsChamp(this)"><xsl:if test="@title='Password' or @title='Mot de passe' or @title='Passwort'"><xsl:attribute name="type">password</xsl:attribute></xsl:if><xsl:if test="contains(@alt,';[NOMBRE]')"><xsl:attribute name="type">tel</xsl:attribute><xsl:attribute name="onchange">verifChampNombre(this)</xsl:attribute></xsl:if><xsl:copy-of select="@style"/><xsl:copy-of select="@maxlength"/></input></xsl:template><xsl:template match="trou[@type='select']"><select class="STY_selectTAT" id="champTrou{@id}" onchange="actionDetecteSelect(this)" onmousedown="actionEffacerClsListe(this)"><xsl:copy-of select="@style"/><xsl:copy-of select="@size"/><option value="_INIT_TROU">&#160;</option></select></xsl:template><xsl:template match="trou[@type='checkbox']"><input type="checkbox" onclick="cocheCase(this)" class="STY_caseTAT" id="champTrou{@id}"><xsl:copy-of select="@style"/></input></xsl:template><xsl:template match="trou[@type='radio']"><xsl:variable name="numTab"><xsl:choose><xsl:when test="count(ancestor::tr//trou[@type='radio']) &gt; 1"><xsl:number level="any" count="tr"/></xsl:when><xsl:when test="count(ancestor::corpsPB)"><xsl:number level="any" count="corpsPB"/>basc</xsl:when><xsl:otherwise></xsl:otherwise></xsl:choose><xsl:number level="any" count="table"/></xsl:variable><input type="radio" name="bRadio{$numTab}" onclick="cocheRadio(this)" class="STY_caseTAT" id="champTrou{@id}"><xsl:copy-of select="@style"/></input></xsl:template><xsl:template match="label"><label for="champTrou{@for}"><xsl:copy-of select="@style"/><xsl:apply-templates/></label></xsl:template><xsl:template match="trou[@type='zone']"><textarea onfocus="focusChamp(this)" onkeypress="tapeDansZone(event)" onkeydown="tapeDansZone(event)" onkeyup="actionDetecteTrou(this)" class="STY_champTAT" id="champTrou{@id}"><xsl:copy-of select="@style"/><xsl:if test="@maxlength and @maxlength!=''"><xsl:attribute name="onkeydown">tapeDansZone(event);return controleLongueur(this,<xsl:value-of select="@maxlength"/>,event)</xsl:attribute><xsl:attribute name="onpaste">ctrLongApresCopie(this,<xsl:value-of select="@maxlength"/>,event)</xsl:attribute><xsl:attribute name="oninput">return controleLongueur(this,<xsl:value-of select="@maxlength"/>,event)</xsl:attribute></xsl:if></textarea></xsl:template><xsl:template name="JSCRIPT_CSS_TAT"><xsl:call-template name="JSCRIPT_CSS_EXO"/><script type="text/javascript" src="../../MosMtr/scripts/contenu/ClasseExerciceTAT.js"/><script type="text/javascript">function entrerDonnees(){exo = new ExerciceTAT();exo.init();exo.scoreTotal=<xsl:apply-templates select="exo/@score"/>;exo.sensibleCasse=<xsl:value-of select="exo/@sensibleCasse='oui'"/>; exo.respectAccents=<xsl:value-of select="exo/@respectAccents='oui'"/>;exo.scoreManuel='<xsl:value-of select="exo/@scoreManuel"/>';<xsl:if test="exo/@ordreAleatoire='oui'">exo.ordreAleatoire=true;</xsl:if>var numT=0; <xsl:for-each select="exo//trou">exo.tabChamps[numT]='<xsl:value-of select="@id"/>';exo.tabPoids[numT]="<xsl:value-of select="substring-before(@alt,';')"/>";exo.tabTxtDef[numT]="<xsl:value-of select="substring-after(@alt,';')"/>";exo.tabNomChamps[numT]="";<xsl:if test="starts-with(@title,'SSP_VAR_')">exo.tabNomChamps[numT]="<xsl:value-of select="@title"/>";</xsl:if><xsl:if test="@type='radio'">exo.existeRadio=true;</xsl:if><xsl:if test="@type='select'">exo.tabSelects[exo.tabSelects.length]='<xsl:value-of select="@id"/>';</xsl:if>numT++;</xsl:for-each> <xsl:for-each select="exo/reponses/reponse"> <xsl:variable name="txtRep"><xsl:value-of select="substring(text(),3)"/><xsl:value-of select="substring(text(),1,2)"/></xsl:variable> <xsl:variable name="valJuste"><xsl:choose><xsl:when test="@styleR='nw'">-1</xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:variable> exo.ajouterReponse('<xsl:value-of select="@id"/>','<xsl:value-of select="@ref"/>','<xsl:value-of select="(number(@ref)*2)+1+$valJuste+$decalY"/>',"<xsl:value-of select="translate($txtRep,'ABCDFGHJKLNOPQTUVWXabcdfghjklnopqtuvwx0124578ierRImMsSz','bHOi4ph5sWlr1c2nI7LBuzgaUNv0FDXtm8SodePVqRfwGKkJMxAQjTC')"/>");</xsl:for-each><xsl:call-template name="AFFECTE_INTERACTIONS"/>exo.construireMenus();}</script></xsl:template> </xsl:stylesheet>
