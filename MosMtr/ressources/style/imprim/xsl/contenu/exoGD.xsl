<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> <xsl:import href="../../../../../../../../MosGnr/xsl/export/GEN_vImprim.xsl" /> <xsl:template name="exoGD"> <div class="STY_question"> <xsl:apply-templates select="exo/question" /> </div> <div class="STY_texteGD"> <xsl:apply-templates select="exo/cadres" /> </div> <xsl:if test="exo/interactions/*"> <div class="STY_zoneCommentaire"> <xsl:call-template name="COMMENTAIRES_EXO" /> </div> </xsl:if> </xsl:template> <xsl:template match="/"> <xsl:call-template name="ENTETE_PAGE" /> <xsl:call-template name="STYLE_contenu" /> <xsl:call-template name="exoGD" /> <xsl:call-template name="BAS_PAGE" /> <xsl:if test="not (/*/@afficheCorrection='non')"> <xsl:call-template name="SCRIPT_CORRIGE" /> </xsl:if> </xsl:template> <xsl:template match="cadres//div" priority="2"> <div id="div{$codePage}{@id}"> <xsl:copy-of select="@style" /> <xsl:copy-of select="@class" /> <xsl:apply-templates /> </div> </xsl:template> <xsl:template match="cadres//div[@class='GD_labelDIV']" priority="3"> </xsl:template> <xsl:template name="SCRIPT_CORRIGE"> <script> <xsl:for-each select="//cadres//div[starts-with(@id,'d')]"> <xsl:variable name="idCourant" select="@id" /> <xsl:variable name="oPaire" select="//paire[(@idDeplace=$idCourant) and (@styleR='nw')]" />var oDeplace=PF_donneObjet('div<xsl:value-of select="$codePage" /><xsl:value-of select="$idCourant" />');var oCible=PF_donneObjet('div<xsl:value-of select="$codePage" /><xsl:value-of select="$oPaire/@idCible" />');<xsl:choose><xsl:when test="($oPaire/@decalageX) and ($oPaire/@decalageX!='')">var decalX=<xsl:value-of select="$oPaire/@decalageX" />;</xsl:when><xsl:otherwise>var decalX=<xsl:value-of select="//exo/@decalageX" />;</xsl:otherwise></xsl:choose><xsl:choose><xsl:when test="($oPaire/@decalageY) and ($oPaire/@decalageY!='')">var decalY=<xsl:value-of select="$oPaire/@decalageY" />;</xsl:when><xsl:otherwise>var decalY=<xsl:value-of select="//exo/@decalageY" />;</xsl:otherwise></xsl:choose>if (oCible!=null){var sansPx=oCible.style.left;sansPx=Number(sansPx.substring(0,sansPx.indexOf('px')));oDeplace.style.left=sansPx+decalX+"px";sansPx=oCible.style.top;sansPx=Number(sansPx.substring(0,sansPx.indexOf('px')));oDeplace.style.top=sansPx+decalY+"px";}</xsl:for-each> </script> </xsl:template> <xsl:template match="consigne"><td class="STY_commentaire" valign="top"> <div class="STY_comtTitre"> <xsl:if test=".//img or .//clipAV"><xsl:attribute name="style">display:block;margin-bottom:3px</xsl:attribute></xsl:if> <xsl:choose><xsl:when test="@titre"> <xsl:value-of select="@titre"/> </xsl:when><xsl:otherwise><lex id="12"/></xsl:otherwise></xsl:choose><xsl:if test="not(@titre='') and not(p or div or img or clipAV or table)">.</xsl:if></div> <div class="STY_comtContenu"><xsl:apply-templates /></div></td></xsl:template><xsl:template match="exo//commentaire"><td class="STY_commentaire" valign="top"><xsl:if test="not(/*/@afficheCorrection='non')"> <div class="STY_comtTitre"> <xsl:if test=".//img or .//clipAV"><xsl:attribute name="style">display:block;margin-bottom:3px</xsl:attribute></xsl:if> <xsl:choose><xsl:when test="@num and @num!=''"><xsl:value-of select="@num" />.Â <xsl:value-of select="@titre" /></xsl:when><xsl:otherwise> <xsl:choose><xsl:when test="@titre"> <xsl:value-of select="@titre"/> </xsl:when><xsl:otherwise><lex id="131"/></xsl:otherwise></xsl:choose></xsl:otherwise></xsl:choose><xsl:if test="not(@titre='') and not(p or div or img or clipAV or table)">.</xsl:if></div> <div class="STY_comtContenu"><xsl:apply-templates /></div> </xsl:if></td></xsl:template><xsl:template match="suggestion"><td class="STY_commentaire" valign="top"><xsl:if test="not(@ref='[solution]') or not(/*/@afficheCorrection='non')"> <div class="STY_comtTitre"> <xsl:if test=".//img or .//clipAV"><xsl:attribute name="style">display:block;margin-bottom:3px</xsl:attribute></xsl:if> <xsl:choose><xsl:when test="@titre"> <xsl:value-of select="@titre"/> </xsl:when><xsl:otherwise> <xsl:choose><xsl:when test="@ref='[solution]'"><lex id="311"/></xsl:when> <xsl:otherwise><lex id="196"/></xsl:otherwise></xsl:choose> </xsl:otherwise></xsl:choose><xsl:if test="not(@titre='') and not(p or div or img or clipAV or table)">.</xsl:if></div> <div class="STY_comtContenu"><xsl:apply-templates /></div> </xsl:if></td></xsl:template></xsl:stylesheet>
